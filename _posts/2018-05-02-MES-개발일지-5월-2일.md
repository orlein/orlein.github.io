---
layout: post
title: MES 개발일지 5월2일
categories: [Idea, PersonalLog]
---

MES 개발일지 5/2
------------------------


3. 개발 단계(계속)

솔직히 말해 나는 그렇게까지 개발 속도가 빠르질 못하다. 특히 이렇게 별 꼴같지도 않은 플러그인과 라이브러리가 빡치게 하는 상황에서는 더더욱 그렇다. 어떻게 메뉴 하나, 화면 하나 추가하는데도 이렇게 빡칠수가 있을까?

  * 뭐가 그렇게도 빡치냐?

안다. 누군가에는 빡치지 않는 상황일 수도 있다. 누군가는 멘탈관리를 잘 해서 안빡칠수도 있다. 아니면 아예 몰라서 안빡칠수도 있겠지. 하지만 나는 그렇다. 빡친다. 속초에 닭강정 먹으러 가는데 "예전에 그랬다는 이유"로 갑자기 [한계령](https://namu.wiki/w/%ED%95%9C%EA%B3%84%EB%A0%B9)을 넘어가려고 하는 것이다. 당신은 운전자이고 옆좌석에 탄 상사가 그렇게 주장한다. "야. 한계령으로 좀 가. 일단 빨리 속초는 가야될 거 아니냐?" 이해 가는가? 터널 잘 뚫려서 감동한 게 지금 몇 년 전인지 기억도 안난다. 안전하다. 빠르다. 운전의 피로도가 덜하다. 터널을 지나가 본 적도 많다. 나는 주장한다. "빨리 가려면 [미시령터널](https://namu.wiki/w/%EB%AF%B8%EC%8B%9C%EB%A0%B9%ED%84%B0%EB%84%90)로 가야합니다" 

  * 무엇이 "한계령"인가?

사실 진짜로 한계령을 넘는 것에 비하면 지금 이건 어린애 장난이다. 아무것도 아니다. 우리 아버지께서는 그 한계령을 수동 차로 대여섯번을 오르내리셨다. 지금 와서 생각해보는건데 정말 존경한다. 클러치 브레이크 악셀 클러치 브레이크 악셀 생각만해도 토나온다. 지금 내가 이렇게 징징댈 수 있는 것도, 분명히 말하건대 아버지 세대를 중심으로 한 나의 선배들 덕분이다. 인정하고 감사하다. 하지만, 그 불편함으로 인해 더 편한 상황을 만들려고 노력 하신 것도 나의 아버지와 같은 선배분들이시다. 그렇다면 후배된 도리는 그 선배분들이 만들어놓으신 걸 이용하는 것이 도리이다. 경제적 논리로 인해 돈을 내는 미시령 터널을 안 갈 수도 있다. 그래도 속도가 중요하다면 돈을 내야하지 않는가. 하물며, 지금 내가 말하고자 하는 것은 심지어 돈도 안낸다. 내가 말하고자 하는 것은 크게 세 가지이다. 형상관리, 의존성관리, 그리고 개발환경관리이다. 이것이 우리 프로젝트의 "한계령"이다.

  * 형상관리

형상관리는 우리가 작업한 것들의 형상을 체계적으로 관리하는 것이다. 그림을 그린다고 생각해보자. 캔버스에 유화로 칠하는건 생각하지 말고, 물론 포토샵이다. layer를 만들고 그 layer에 모양을 그린다. 각 각의 layer가 완성될 때마다 전체 그림이 완성되어 간다. 만약에 클라이언트가 각각의 layer가 관리되지 않는 그림판같은 곳을 강요하면서 포토샵같은 퀄리티를 기대한다면? 클라이언트가 컴퓨터를 해킹하여 억지로 당신의 layer들을 합쳐버린다면? 그런 불상사를 막는 것이 형상관리이다. 나는 대중적으로 굉장히 많이 쓰이는 git을 형상관리 tool로 선택했고, 우리 팀에 잘 맞는 선택이라고 생각했다. 

하지만 제대로 git을 쓰려면 branch를 잘 써야했다. 우리 팀은 나 포함하여 branch를 잘 알고 있는 사람이 없었고 불행히도 master에 모든 것을 때려부었다. 내 고집으로 deploy branch를 만들어, 배포 서버에는 deploy branch가 적용되게끔 한 것이 한계였다. 제대로 쓰고자 한다면 어떻게 해야 할까. 배울만한 사람이 없었다. 그나마 경력이 있는 사람은 죄다 다른 site에 가서 일을 하고 있다. 전화해서 괴롭힐까? 난 그런 성격이 못 된다. 들이박아야 한다.

아무튼 초보적인 레벨이나마 형상관리 tool을 git으로 채택하여 쓰고 있다. 이걸 잘 쓰려면, 당연히 의존성관리도 잘 되어야 의미가 있다. 그리고 예상하겠지만 의존성관리도 개판이다.

  * 의존성관리

"사장님에게 의존성관리를 잘 하자고 했다가 혼났다" 그래. 사장님은 그럴 수 있다. 모를 수도 있지. 하지만 프로젝트를 아주 세밀하게 관리하는 사람으로서는 절대로 절대 그래서는 안된다. Maven도 쓰지 말란다. npm? 몰라서 언급을 안한다. 누가 기술을 잘 아는가? 나에게 월급을 주는 것이 무엇 때문일까? 이런 기술을 알고 공부해서 적용하고, 비용을 낮추거나 생산성을 올려달라고 월급 주는 것이 아닌가? 내가 진정 바라는 것은 일을 하며 내가 고용된 의미를 찾는 것이다. 그게 진하면 진해질수록 날 쓰는 사람은 돈을 벌고 나도 돈을 더 달라고 요구를 할 수가 있다. 이게 내 사고방식이다. 간단하다. 하지만 자꾸 한계령을 넘어가라 한다. 난 두부집 아들도 아닌데, 드리프트를 해야하나?

의존성관리가 잘 되어있다면 (주로) 변하지 않는 소스코드를 인터넷에서 가져올 수 있다. 우리가 개발할 대상 프로젝트는 소스코드가 자주 변하는 것이니 형상관리를 하지만, 그렇지 않는다면 의존성으로 두고 의존성관리를 하면 그만이다. 매우 효율적이고, 프로젝트 코드 자체의 변경점을 작고 심플하게 관리하는 것이 가능해진다. 그래서 다른 회사의 수많은 프로젝트에서 의존성관리를 필수적으로 생각한다. 이 점을 강하게 언급했으나 소용이 없었다. 

어쩌면 의존성자체를 별로 사용하지 않는 프로젝트라고 오해할 수도 있을 것이다. 우리 프로젝트는, 직접참조하는 의존성을 42개 사용한다. 그리고 그 의존성의 의존성도 장담컨대 엄청나게 많을 것이다. 의존성을 사용하지 않는 프로젝트라고 한다면 개발환경 관리만 잘 되어있어도 한계령 넘는다는 소리는 안했을 것이다.

  * 개발환경관리

개발환경은 정말 중요하다. 프로젝트에 처음 들어왔을 때, 개발환경을 구축하는 것만 최소 하루 최대 2주 잡는다. 잘, 신중하게 그리고 빠르게 하는 것이 개발환경구축의 포인트이다. 앞으로의 프로젝트를 빠르게 개발할 수 있도록 문제 없이. 이럴 때 필요한 것이 당연히 자동화된 무언가이다. 나는 [chocolatey](http://chocolatey.org)를 굉장히 좋아하고 이를 개발환경구축 및 관리에 적극적으로 채용하고 있다. 이유는 단순하다. 리눅스만큼 소프트웨어 인스톨과 업데이트가 편해지기 때문이다. 경로를 설정하기 귀찮아진다는 단점은 있지만 아무래도 상관없다. 알아서 잘 해준다. 하지만 이건 그저 개발환경 구축에 도움을 줄 뿐이다. 진짜 개발환경관리에 도움을 주는 것은 cli들이다.

cli는 command line interface인데 wysiwyg 에디터가 아닌 이상은 이게 편하다. 까놓고 말해, '나는 이 화면이 필요한데 이렇게 좀 만들어 줘' 라고 커맨드라인에 입력하는 것이다. 그렇게 많지도 않다. 그냥 '난 이 컴포넌트가 필요해' '난 이 페이지가 필요해' 정도이다. [angular cli](https://cli.angular.io/)는 그런 용도에 최적이다. 물론 현재 프로젝트 AngularJS는 이게 안된다. 뭘 만들때, 수정할 때, 그냥 요만한 컴포넌트를 추가할 때 등등 별 거지같은 알파벳 맞추기 게임을 해야한다.

  * 그래서 "굽이굽이 한계령을 돌아가시는 기분"은 어떻습니까

  뭘 만들 때는...
  > 1. static/config/ModuleConfig.js에 가서 모듈을 정성스럽게 만든다. 이클립스같은 똥쓰레기 안쓴지 오래돼서 린팅이나 스펠체크 플러그인이 뭐 있는지도 모르겠다. 내일 찾아봐야지.
  > 2. 폴더를 만든다. 폴더 구조는 config, controller, json, views 폴더가 있어야한다.
  > 3. 그 폴더 내부에는 module.js가 있어야 한다.
  > 4. module.js 안에는 $stateProvider가 injection된 함수가 필요하다. $stateProvider는 state가 몇 개 있는데, 이것이 실질적으로 들어가는 메뉴들의 config이다. 다른 곳에서 참조한 **Config라는 변수가 있는데, 이게 체크될 리 없다. dependency injection같은 거창한 이유는 아니고, 그냥 index.html에서 import되어서 그런거다. 개짜증난다. 아참 이 함수 이름도 다른곳에서 틀리면 안된다.
  > 5. config 폴더에서 module.js에 정의된 이름을 잘 기억하거나 Ctrl+C 하여 AngularModuleConfig.js와 StaticConfig.js 파일을 만들어야한다. 여기서 view 파일과 controller 파일도 또 정의해줘야하는데, 이 이름들도 틀리면 안된다.
  > 6. view파일을 또 만드는 데 위에 정의한거랑 틀리면 안된다. 이게 하나라도 틀리면 대체 어디서 틀렸다고 말해주지도 않고, 그냥 틀렸다고만 한다. 눈 빠지게 글자 하나하나 쳐다봐야한다. Ctrl+CV 하다가 실수났을 수도 있다. 이름도 다 비슷비슷하다. 

다른 커리어에 도움될수도 있지 않은가. 라고 얘기할 수 있으나 그렇지 않다. 말했지않는가. 한계령이라고. 터널뚫렸는데 한계령을 왜 가냐고. 그저 나와 같이 일하는 팀원들이 안쓰러울 뿐이다. 내가 능력이 부족하고 정치력이 부족해서 사장이 말하는 개소리를 깨부수지 못한걸 어쩌겠는가. 아무리 돈 많이준다 해도 난 이런 개짓거리는 못 하겠다. 할 만큼 하고, 최대한 빨리 탈출해야지 최대한.



아 한가지 좀 희망적인건 있다. 생각보다 백단을 Spring Boot로 Restful API 개발하는건 정말 쉽다. 들리는 얘기로는 Embedded WAS라 scaling도 힘들다던데, 그럴 필요는 없는 작은 규모의 프로젝트이다. 이게 위안이다. 